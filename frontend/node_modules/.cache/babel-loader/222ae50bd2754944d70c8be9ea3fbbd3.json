{"ast":null,"code":"import PopupWithForm from'./PopupWithForm';import useInput from'../utils/formValidator';import{useEffect,useMemo}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var onLoading=_ref.onLoading,isOpen=_ref.isOpen,onUpdateAvatar=_ref.onUpdateAvatar,onClose=_ref.onClose;var isLoading=onLoading;var initialValues=useMemo(function(){return{link:''};},[]);var avatar=useInput(initialValues);function handleSubmit(e){e.preventDefault();onUpdateAvatar(avatar.values.link);}useEffect(function(){!isOpen&&avatar.resetForm();},[isOpen]);useEffect(function(){if(!isOpen)return;function handleEscClose(e){if(e.key==='Escape'){onClose();}}document.addEventListener('keydown',handleEscClose);return function(){document.removeEventListener('keydown',handleEscClose);};},[isOpen,onClose]);return/*#__PURE__*/_jsx(PopupWithForm,{name:'avatar',title:'Обновить аватар',isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,isLoading:isLoading,isValid:avatar.isValid,buttonText:'Сохранить',loadingText:'Сохранение...',children:/*#__PURE__*/_jsxs(\"fieldset\",{className:'popup__fieldset',children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"popup__input popup__input_type_avatar\",name:\"link\",onChange:avatar.handleChange,value:avatar.values.link,placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",id:\"avatar-link\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error popup__input-error_active avatar-link-error\",children:avatar.errors.link})]})});}export default EditAvatarPopup;","map":{"version":3,"sources":["C:/Users/stanv/dev/react-mesto-api-full/frontend/src/components/EditAvatarPopup.js"],"names":["PopupWithForm","useInput","useEffect","useMemo","EditAvatarPopup","onLoading","isOpen","onUpdateAvatar","onClose","isLoading","initialValues","link","avatar","handleSubmit","e","preventDefault","values","resetForm","handleEscClose","key","document","addEventListener","removeEventListener","isValid","handleChange","errors"],"mappings":"AAAA,MAAOA,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,OAASC,SAAT,CAAoBC,OAApB,KAAmC,OAAnC,C,wFAEA,QAASC,CAAAA,eAAT,MAAyE,IAA9CC,CAAAA,SAA8C,MAA9CA,SAA8C,CAAnCC,MAAmC,MAAnCA,MAAmC,CAA3BC,cAA2B,MAA3BA,cAA2B,CAAXC,OAAW,MAAXA,OAAW,CACvE,GAAMC,CAAAA,SAAS,CAAGJ,SAAlB,CACA,GAAMK,CAAAA,aAAa,CAAGP,OAAO,CAAC,UAAM,CAClC,MAAO,CAAEQ,IAAI,CAAE,EAAR,CAAP,CACD,CAF4B,CAE1B,EAF0B,CAA7B,CAGA,GAAMC,CAAAA,MAAM,CAAGX,QAAQ,CAACS,aAAD,CAAvB,CAEA,QAASG,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACvBA,CAAC,CAACC,cAAF,GACAR,cAAc,CAACK,MAAM,CAACI,MAAP,CAAcL,IAAf,CAAd,CACD,CAEDT,SAAS,CAAC,UAAM,CACd,CAACI,MAAD,EAAWM,MAAM,CAACK,SAAP,EAAX,CACD,CAFQ,CAEN,CAACX,MAAD,CAFM,CAAT,CAIAJ,SAAS,CAAC,UAAM,CACd,GAAI,CAACI,MAAL,CAAa,OACb,QAASY,CAAAA,cAAT,CAAwBJ,CAAxB,CAA2B,CACzB,GAAIA,CAAC,CAACK,GAAF,GAAU,QAAd,CAAwB,CACtBX,OAAO,GACR,CACF,CACDY,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,CAAqCH,cAArC,EACA,MAAO,WAAM,CACXE,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,CAAwCJ,cAAxC,EACD,CAFD,CAGD,CAXQ,CAWN,CAACZ,MAAD,CAASE,OAAT,CAXM,CAAT,CAaA,mBACE,KAAC,aAAD,EAAe,IAAI,CAAE,QAArB,CAA+B,KAAK,CAAE,iBAAtC,CAAyD,MAAM,CAAEF,MAAjE,CACE,OAAO,CAAEE,OADX,CACoB,QAAQ,CAAEK,YAD9B,CAC4C,SAAS,CAAEJ,SADvD,CACkE,OAAO,CAAEG,MAAM,CAACW,OADlF,CAC2F,UAAU,CAAE,WADvG,CACoH,WAAW,CAAE,eADjI,uBAGE,kBAAU,SAAS,CAAE,iBAArB,wBACE,cAAO,IAAI,CAAC,KAAZ,CAAkB,SAAS,CAAC,uCAA5B,CAAoE,IAAI,CAAC,MAAzE,CACE,QAAQ,CAAEX,MAAM,CAACY,YADnB,CAEE,KAAK,CAAEZ,MAAM,CAACI,MAAP,CAAcL,IAFvB,CAGE,WAAW,CAAC,oGAHd,CAIE,EAAE,CAAC,aAJL,CAKE,QAAQ,KALV,EADF,cAQE,aAAM,SAAS,iEAAf,UACGC,MAAM,CAACa,MAAP,CAAcd,IADjB,EARF,GAHF,EADF,CAkBD,CAED,cAAeP,CAAAA,eAAf","sourcesContent":["import PopupWithForm from './PopupWithForm';\r\nimport useInput from '../utils/formValidator';\r\nimport { useEffect, useMemo } from 'react';\r\n\r\nfunction EditAvatarPopup({ onLoading, isOpen, onUpdateAvatar, onClose }) {\r\n  const isLoading = onLoading;\r\n  const initialValues = useMemo(() => {\r\n    return { link: '' }\r\n  }, [])\r\n  const avatar = useInput(initialValues);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar(avatar.values.link);\r\n  }\r\n\r\n  useEffect(() => {\r\n    !isOpen && avatar.resetForm();\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    function handleEscClose(e) {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    }\r\n    document.addEventListener('keydown', handleEscClose);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscClose);\r\n    }\r\n  }, [isOpen, onClose])\r\n\r\n  return (\r\n    <PopupWithForm name={'avatar'} title={'Обновить аватар'} isOpen={isOpen}\r\n      onClose={onClose} onSubmit={handleSubmit} isLoading={isLoading} isValid={avatar.isValid} buttonText={'Сохранить'} loadingText={'Сохранение...'}\r\n    >\r\n      <fieldset className={'popup__fieldset'}>\r\n        <input type=\"url\" className=\"popup__input popup__input_type_avatar\" name=\"link\"\r\n          onChange={avatar.handleChange}\r\n          value={avatar.values.link}\r\n          placeholder=\"Ссылка на картинку\"\r\n          id=\"avatar-link\"\r\n          required\r\n        />\r\n        <span className={`popup__input-error popup__input-error_active avatar-link-error`}>\r\n          {avatar.errors.link}\r\n        </span>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;"]},"metadata":{},"sourceType":"module"}