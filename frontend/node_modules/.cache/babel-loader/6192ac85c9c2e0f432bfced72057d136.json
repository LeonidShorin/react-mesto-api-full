{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Leonid\\\\dev\\\\react-mesto-auth\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import{useContext,useEffect,useMemo}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';import PopupWithForm from'./PopupWithForm';import useInput from'../utils/formValidator';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var onLoading=_ref.onLoading,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser,isOpen=_ref.isOpen;var currentUser=useContext(CurrentUserContext);var initialValues=useMemo(function(){return{name:'',about:''};},[]);var validation=useInput(initialValues);function handleSubmit(e){e.preventDefault();onUpdateUser(validation.values.name,validation.values.about);}useEffect(function(){if(isOpen){validation.setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{name:currentUser.name,about:currentUser.about});});}else{validation.resetForm();}},[isOpen,currentUser]);useEffect(function(){if(!isOpen)return;function handleEscClose(e){if(e.key==='Escape'){onClose();}}document.addEventListener('keydown',handleEscClose);return function(){document.removeEventListener('keydown',handleEscClose);};},[isOpen,onClose]);return/*#__PURE__*/_jsx(PopupWithForm,{name:'profile',title:'Редактировать профиль',isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,isLoading:onLoading,isValid:validation.isValid,buttonText:'Сохранить',loadingText:'Сохранение...',children:/*#__PURE__*/_jsxs(\"fieldset\",{className:'popup__fieldset',children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__input popup__input_type_name\",name:\"name\",placeholder:\"\\u0418\\u043C\\u044F\",value:validation.values.name,onChange:validation.handleChange,id:\"nameInput\",minLength:\"2\",maxLength:\"40\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error name-input-error popup__input-error_active\",children:validation.errors.name}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__input popup__input_type_job\",name:\"about\",value:validation.values.about,onChange:validation.handleChange,placeholder:\"\\u041E \\u0441\\u0435\\u0431\\u0435\",id:\"about-input\",minLength:\"2\",maxLength:\"200\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error description-input-error popup__input-error_active\",children:validation.errors.about})]})});}export default EditProfilePopup;","map":{"version":3,"sources":["C:/Users/Leonid/dev/react-mesto-auth/src/components/EditProfilePopup.js"],"names":["useContext","useEffect","useMemo","CurrentUserContext","PopupWithForm","useInput","EditProfilePopup","onLoading","onClose","onUpdateUser","isOpen","currentUser","initialValues","name","about","validation","handleSubmit","e","preventDefault","values","setValues","prev","resetForm","handleEscClose","key","document","addEventListener","removeEventListener","isValid","handleChange","errors"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useMemo } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport useInput from '../utils/formValidator'\r\n\r\nfunction EditProfilePopup({ onLoading, onClose, onUpdateUser, isOpen }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const initialValues = useMemo(() => ({ name: '', about: '' }), [])\r\n  const validation = useInput(initialValues);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser(validation.values.name, validation.values.about)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      validation.setValues((prev) => ({\r\n        ...prev,\r\n        name: currentUser.name,\r\n        about: currentUser.about\r\n      }));\r\n    } else {\r\n      validation.resetForm()\r\n    }\r\n  }, [isOpen, currentUser])\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    function handleEscClose(e) {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    }\r\n    document.addEventListener('keydown', handleEscClose);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscClose);\r\n    }\r\n  }, [isOpen, onClose])\r\n\r\n  return (\r\n    <PopupWithForm name={'profile'} title={'Редактировать профиль'} isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}\r\n      isLoading={onLoading} isValid={validation.isValid} buttonText={'Сохранить'} loadingText={'Сохранение...'}\r\n    >\r\n      <fieldset className={'popup__fieldset'}>\r\n        <input type=\"text\" className=\"popup__input popup__input_type_name\" name=\"name\" placeholder=\"Имя\" value={validation.values.name} onChange={validation.handleChange}\r\n          id=\"nameInput\" minLength=\"2\" maxLength=\"40\" required\r\n        />\r\n        <span className={`popup__input-error name-input-error popup__input-error_active`}>{validation.errors.name}\r\n        </span>\r\n        <input type=\"text\" className=\"popup__input popup__input_type_job\" name=\"about\" value={validation.values.about} onChange={validation.handleChange}\r\n          placeholder=\"О себе\" id=\"about-input\" minLength=\"2\" maxLength=\"200\" required\r\n        />\r\n        <span className={`popup__input-error description-input-error popup__input-error_active`}>{validation.errors.about}\r\n        </span>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;"]},"metadata":{},"sourceType":"module"}