{"ast":null,"code":"import PopupWithForm from'./PopupWithForm';import useForm from'../utils/useForm';import{useEffect,useMemo}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var onLoading=_ref.onLoading,isOpen=_ref.isOpen,onUpdateAvatar=_ref.onUpdateAvatar,onClose=_ref.onClose;var isLoading=onLoading;var initialValues=useMemo(function(){return{link:''};},[]);var avatar=useForm(initialValues);function handleSubmit(e){e.preventDefault();onUpdateAvatar(avatar.values.link);}useEffect(function(){!isOpen&&avatar.resetForm();},[isOpen]);useEffect(function(){if(!isOpen)return;function handleEscClose(e){if(e.key==='Escape'){onClose();}}document.addEventListener('keydown',handleEscClose);return function(){document.removeEventListener('keydown',handleEscClose);};},[isOpen,onClose]);return/*#__PURE__*/_jsx(PopupWithForm,{name:'update-avatar-form',title:'Обновить аватар',isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,isLoading:isLoading,isValid:avatar.isValid,defaultTitle:'Сохранить',loadingTitle:'Сохранение...',children:/*#__PURE__*/_jsxs(\"div\",{className:'popup__form-fieldset',children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"popup__form-item popup__form-item_type_avatar-link\",name:\"link\",onChange:avatar.handleChange,value:avatar.values.link,placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",id:\"avatar-link\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error popup__input-error_active\\n         avatar-link-error\",children:avatar.errors.link})]})});}export default EditAvatarPopup;","map":{"version":3,"sources":["C:/Users/stanv/dev/react-mesto-api-full/frontend/src/components/EditAvatarPopup.js"],"names":["PopupWithForm","useForm","useEffect","useMemo","EditAvatarPopup","onLoading","isOpen","onUpdateAvatar","onClose","isLoading","initialValues","link","avatar","handleSubmit","e","preventDefault","values","resetForm","handleEscClose","key","document","addEventListener","removeEventListener","isValid","handleChange","errors"],"mappings":"AAAA,MAAOA,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,OAAQC,SAAR,CAAmBC,OAAnB,KAAiC,OAAjC,C,wFAEA,QAASC,CAAAA,eAAT,MAAuE,IAA7CC,CAAAA,SAA6C,MAA7CA,SAA6C,CAAlCC,MAAkC,MAAlCA,MAAkC,CAA1BC,cAA0B,MAA1BA,cAA0B,CAAVC,OAAU,MAAVA,OAAU,CACrE,GAAMC,CAAAA,SAAS,CAAGJ,SAAlB,CACA,GAAMK,CAAAA,aAAa,CAAGP,OAAO,CAAC,UAAM,CAClC,MAAO,CAACQ,IAAI,CAAE,EAAP,CAAP,CACD,CAF4B,CAE1B,EAF0B,CAA7B,CAGA,GAAMC,CAAAA,MAAM,CAAGX,OAAO,CAACS,aAAD,CAAtB,CAEA,QAASG,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACvBA,CAAC,CAACC,cAAF,GACAR,cAAc,CAACK,MAAM,CAACI,MAAP,CAAcL,IAAf,CAAd,CACD,CAEDT,SAAS,CAAC,UAAM,CACd,CAACI,MAAD,EAAWM,MAAM,CAACK,SAAP,EAAX,CACD,CAFQ,CAEN,CAACX,MAAD,CAFM,CAAT,CAIAJ,SAAS,CAAC,UAAI,CACZ,GAAI,CAACI,MAAL,CAAa,OACb,QAASY,CAAAA,cAAT,CAAwBJ,CAAxB,CAA2B,CACzB,GAAIA,CAAC,CAACK,GAAF,GAAU,QAAd,CAAwB,CACtBX,OAAO,GACR,CACF,CACDY,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,CAAqCH,cAArC,EACA,MAAO,WAAI,CACTE,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,CAAwCJ,cAAxC,EACD,CAFD,CAGD,CAXQ,CAWN,CAACZ,MAAD,CAASE,OAAT,CAXM,CAAT,CAaA,mBAAQ,KAAC,aAAD,EAAe,IAAI,CAAE,oBAArB,CACe,KAAK,CAAE,iBADtB,CAEe,MAAM,CAAEF,MAFvB,CAGe,OAAO,CAAEE,OAHxB,CAIe,QAAQ,CAAEK,YAJzB,CAKe,SAAS,CAAEJ,SAL1B,CAMe,OAAO,CAAEG,MAAM,CAACW,OAN/B,CAOe,YAAY,CAAE,WAP7B,CAQe,YAAY,CAAE,eAR7B,uBASN,aAAK,SAAS,CAAE,sBAAhB,wBACE,cAAO,IAAI,CAAC,KAAZ,CACO,SAAS,CAAC,oDADjB,CAEO,IAAI,CAAC,MAFZ,CAGO,QAAQ,CAAEX,MAAM,CAACY,YAHxB,CAIO,KAAK,CAAEZ,MAAM,CAACI,MAAP,CAAcL,IAJ5B,CAKO,WAAW,CAAC,oGALnB,CAMO,EAAE,CAAC,aANV,CAOO,QAAQ,KAPf,EADF,cASE,aAAM,SAAS,2EAAf,UACwBC,MAAM,CAACa,MAAP,CAAcd,IADtC,EATF,GATM,EAAR,CAsBD,CAED,cAAeP,CAAAA,eAAf","sourcesContent":["import PopupWithForm from './PopupWithForm';\nimport useForm from '../utils/useForm';\nimport {useEffect, useMemo} from 'react';\n\nfunction EditAvatarPopup({onLoading, isOpen, onUpdateAvatar, onClose}) {\n  const isLoading = onLoading;\n  const initialValues = useMemo(() => {\n    return {link: ''}\n  }, [])\n  const avatar = useForm(initialValues);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar(avatar.values.link);\n  }\n\n  useEffect(() => {\n    !isOpen && avatar.resetForm();\n  }, [isOpen])\n\n  useEffect(()=>{\n    if (!isOpen) return;\n    function handleEscClose(e) {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    }\n    document.addEventListener('keydown', handleEscClose);\n    return ()=>{\n      document.removeEventListener('keydown', handleEscClose);\n    }\n  }, [isOpen, onClose])\n\n  return (<PopupWithForm name={'update-avatar-form'}\n                         title={'Обновить аватар'}\n                         isOpen={isOpen}\n                         onClose={onClose}\n                         onSubmit={handleSubmit}\n                         isLoading={isLoading}\n                         isValid={avatar.isValid}\n                         defaultTitle={'Сохранить'}\n                         loadingTitle={'Сохранение...'}>\n    <div className={'popup__form-fieldset'}>\n      <input type=\"url\"\n             className=\"popup__form-item popup__form-item_type_avatar-link\"\n             name=\"link\"\n             onChange={avatar.handleChange}\n             value={avatar.values.link}\n             placeholder=\"Ссылка на картинку\"\n             id=\"avatar-link\"\n             required/>\n      <span className={`popup__input-error popup__input-error_active\n         avatar-link-error`}>{avatar.errors.link}</span>\n    </div>\n  </PopupWithForm>)\n}\n\nexport default EditAvatarPopup"]},"metadata":{},"sourceType":"module"}