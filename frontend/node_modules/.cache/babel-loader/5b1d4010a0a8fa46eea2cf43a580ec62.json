{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Leonid\\\\dev\\\\react-mesto-auth\\\\src\\\\components\\\\EditProfilePopup.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useMemo } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\nimport useInput from '../utils/formValidator';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditProfilePopup(_ref) {\n  _s();\n\n  let {\n    onLoading,\n    onClose,\n    onUpdateUser,\n    isOpen\n  } = _ref;\n  const currentUser = useContext(CurrentUserContext);\n  const initialValues = useMemo(() => ({\n    name: '',\n    about: ''\n  }), []);\n  const validation = useInput(initialValues);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser(validation.values.name, validation.values.about);\n  }\n\n  useEffect(() => {\n    if (isOpen) {\n      validation.setValues(prev => ({ ...prev,\n        name: currentUser.name,\n        about: currentUser.about\n      }));\n    } else {\n      validation.resetForm();\n    }\n  }, [isOpen, currentUser]);\n  useEffect(() => {\n    if (!isOpen) return;\n\n    function handleEscClose(e) {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    }\n\n    document.addEventListener('keydown', handleEscClose);\n    return () => {\n      document.removeEventListener('keydown', handleEscClose);\n    };\n  }, [isOpen, onClose]);\n  return /*#__PURE__*/_jsxDEV(PopupWithForm, {\n    name: 'profile',\n    title: 'Редактировать профиль',\n    isOpen: isOpen,\n    onClose: onClose,\n    onSubmit: handleSubmit,\n    isLoading: onLoading,\n    isValid: validation.isValid,\n    buttonText: 'Сохранить',\n    loadingText: 'Сохранение...',\n    children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      className: 'popup__fieldset',\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"popup__input popup__input_type_name\",\n        name: \"name\",\n        placeholder: \"\\u0418\\u043C\\u044F\",\n        value: validation.values.name,\n        onChange: validation.handleChange,\n        id: \"nameInput\",\n        minLength: \"2\",\n        maxLength: \"40\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `popup__input-error name-input-error popup__input-error_active`,\n        children: validation.errors.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"popup__input popup__input_type_job\",\n        name: \"about\",\n        value: validation.values.about,\n        onChange: validation.handleChange,\n        placeholder: \"\\u041E \\u0441\\u0435\\u0431\\u0435\",\n        id: \"about-input\",\n        minLength: \"2\",\n        maxLength: \"200\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `popup__input-error description-input-error popup__input-error_active`,\n        children: validation.errors.about\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditProfilePopup, \"2Nhq6sFQleAgl6JmROTBTWfR2No=\", false, function () {\n  return [useInput];\n});\n\n_c = EditProfilePopup;\nexport default EditProfilePopup;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProfilePopup\");","map":{"version":3,"sources":["C:/Users/Leonid/dev/react-mesto-auth/src/components/EditProfilePopup.js"],"names":["useContext","useEffect","useMemo","CurrentUserContext","PopupWithForm","useInput","EditProfilePopup","onLoading","onClose","onUpdateUser","isOpen","currentUser","initialValues","name","about","validation","handleSubmit","e","preventDefault","values","setValues","prev","resetForm","handleEscClose","key","document","addEventListener","removeEventListener","isValid","handleChange","errors"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useMemo } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport useInput from '../utils/formValidator'\r\n\r\nfunction EditProfilePopup({ onLoading, onClose, onUpdateUser, isOpen }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const initialValues = useMemo(() => ({ name: '', about: '' }), [])\r\n  const validation = useInput(initialValues);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser(validation.values.name, validation.values.about)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      validation.setValues((prev) => ({\r\n        ...prev,\r\n        name: currentUser.name,\r\n        about: currentUser.about\r\n      }));\r\n    } else {\r\n      validation.resetForm()\r\n    }\r\n  }, [isOpen, currentUser])\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    function handleEscClose(e) {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    }\r\n    document.addEventListener('keydown', handleEscClose);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscClose);\r\n    }\r\n  }, [isOpen, onClose])\r\n\r\n  return (\r\n    <PopupWithForm name={'profile'} title={'Редактировать профиль'} isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}\r\n      isLoading={onLoading} isValid={validation.isValid} buttonText={'Сохранить'} loadingText={'Сохранение...'}\r\n    >\r\n      <fieldset className={'popup__fieldset'}>\r\n        <input type=\"text\" className=\"popup__input popup__input_type_name\" name=\"name\" placeholder=\"Имя\" value={validation.values.name} onChange={validation.handleChange}\r\n          id=\"nameInput\" minLength=\"2\" maxLength=\"40\" required\r\n        />\r\n        <span className={`popup__input-error name-input-error popup__input-error_active`}>{validation.errors.name}\r\n        </span>\r\n        <input type=\"text\" className=\"popup__input popup__input_type_job\" name=\"about\" value={validation.values.about} onChange={validation.handleChange}\r\n          placeholder=\"О себе\" id=\"about-input\" minLength=\"2\" maxLength=\"200\" required\r\n        />\r\n        <span className={`popup__input-error description-input-error popup__input-error_active`}>{validation.errors.about}\r\n        </span>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;"]},"metadata":{},"sourceType":"module"}