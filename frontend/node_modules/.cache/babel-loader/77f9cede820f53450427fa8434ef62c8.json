{"ast":null,"code":"import{useContext,useEffect}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';import PopupWithForm from'./PopupWithForm';import useInput from'../utils/formValidator';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(props){var currentUser=useContext(CurrentUserContext);var isLoading=props.onLoading;var isOpen=props.isOpen;var name=useInput(currentUser.name,isOpen);var description=useInput(currentUser.about,isOpen);var showDescriptionError=!description.isCorrect&&description.error;var showNameError=!name.isCorrect&&name.error;var showDisabledSubmitButton=name.disabledSubmitButton||description.disabledSubmitButton||isLoading;function handleSubmit(e){e.preventDefault();props.onUpdateUser(name.value,description.value);}useEffect(function(){name.handleChange(currentUser.name);description.handleChange(currentUser.about);},[currentUser]);return/*#__PURE__*/_jsx(PopupWithForm,{name:'profile',title:'Редактировать профиль',isOpen:props.isOpen,onClose:props.onClose,onSubmit:handleSubmit,onLoading:props.onLoading,children:/*#__PURE__*/_jsxs(\"fieldset\",{className:'popup__fieldset',form:'edit-profile-form',children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__input popup__input_type_name\",name:\"name\",placeholder:\"\\u0418\\u043C\\u044F\",value:name.value,onChange:name.handleChange,id:\"nameInput\",minLength:\"2\",maxLength:\"40\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error name-input-error \".concat(showNameError&&'popup__input-error_active'),children:name.error}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__input popup__input_type_job\",name:\"description\",value:description.value,onChange:description.handleChange,placeholder:\"\\u041E \\u0441\\u0435\\u0431\\u0435\",id:\"description-input\",minLength:\"2\",maxLength:\"200\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error description-input-error \".concat(showDescriptionError&&'popup__input-error_active'),children:description.error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"popup__save-button \".concat(showDisabledSubmitButton&&'popup__save-button_disabled'),children:isLoading?\"Сохранение...\":\"Сохранить\"})]})});}export default EditProfilePopup;","map":{"version":3,"sources":["C:/Users/Leonid/dev/mesto-react/src/components/EditProfilePopup.js"],"names":["useContext","useEffect","CurrentUserContext","PopupWithForm","useInput","EditProfilePopup","props","currentUser","isLoading","onLoading","isOpen","name","description","about","showDescriptionError","isCorrect","error","showNameError","showDisabledSubmitButton","disabledSubmitButton","handleSubmit","e","preventDefault","onUpdateUser","value","handleChange","onClose"],"mappings":"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","sourcesContent":["import {useContext, useEffect} from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport useInput from '../utils/formValidator'\r\n\r\nfunction EditProfilePopup (props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const isLoading = props.onLoading;\r\n  const isOpen = props.isOpen;\r\n  const name = useInput(currentUser.name, isOpen);\r\n  const description = useInput(currentUser.about, isOpen);\r\n  const showDescriptionError = !description.isCorrect && description.error;\r\n  const showNameError = !name.isCorrect && name.error;\r\n  const showDisabledSubmitButton = name.disabledSubmitButton || description.disabledSubmitButton || isLoading;\r\n\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateUser(name.value, description.value)\r\n  }\r\n\r\n\r\n  useEffect(()=>{\r\n    name.handleChange(currentUser.name);\r\n    description.handleChange(currentUser.about)\r\n  }, [currentUser])\r\n\r\n  return (\r\n    <PopupWithForm name={'profile'} title={'Редактировать профиль'} isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit} \r\n    onLoading={props.onLoading}>\r\n      <fieldset className={'popup__fieldset'} form={'edit-profile-form'}>\r\n        <input type=\"text\" className=\"popup__input popup__input_type_name\" name=\"name\" placeholder=\"Имя\" value={name.value} onChange={name.handleChange}\r\n        id=\"nameInput\" minLength=\"2\" maxLength=\"40\" required\r\n        />\r\n        <span className={`popup__input-error name-input-error ${showNameError&& 'popup__input-error_active'}`}>\r\n          {name.error}\r\n        </span>\r\n        <input type=\"text\" className=\"popup__input popup__input_type_job\" name=\"description\" value={description.value} onChange={description.handleChange}\r\n        placeholder=\"О себе\" id=\"description-input\" minLength=\"2\" maxLength=\"200\" required\r\n        />\r\n        <span className={`popup__input-error description-input-error ${showDescriptionError&& 'popup__input-error_active'}`}>\r\n          {description.error}\r\n        </span>\r\n        <button type=\"submit\" className={`popup__save-button ${(showDisabledSubmitButton)&& 'popup__save-button_disabled'}`}>\r\n          {isLoading? \"Сохранение...\": \"Сохранить\"}\r\n        </button>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;"]},"metadata":{},"sourceType":"module"}