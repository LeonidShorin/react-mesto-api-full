{"ast":null,"code":"import PopupWithForm from'./PopupWithForm.js';import useForm from'../utils/useForm';import{useEffect,useMemo}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddPlacePopup(_ref){var onLoading=_ref.onLoading,isOpen=_ref.isOpen,onAddPlace=_ref.onAddPlace,onClose=_ref.onClose;var initialValues=useMemo(function(){return{name:'',link:''};},[]);var validation=useForm(initialValues);function handleSubmit(e){e.preventDefault();onAddPlace(validation.values.name,validation.values.link);}useEffect(function(){if(!isOpen)return;function handleEscClose(e){if(e.key==='Escape'){onClose();}}document.addEventListener('keydown',handleEscClose);return function(){document.removeEventListener('keydown',handleEscClose);};},[isOpen,onClose]);useEffect(function(){!isOpen&&validation.resetForm();},[isOpen]);return/*#__PURE__*/_jsx(PopupWithForm,{name:'add-card-form',title:'Новое место',isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,isValid:validation.isValid,isLoading:onLoading,defaultTitle:'Создать',loadingTitle:'Сохранение...',children:/*#__PURE__*/_jsxs(\"div\",{className:'popup__form-fieldset',children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__form-item popup__form-item_type_card-description\",name:\"name\",value:validation.values.name,onChange:validation.handleChange,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",id:\"card\",minLength:\"2\",maxLength:\"20\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error card-error\\n        popup__input-error_active\",children:validation.errors.name}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"popup__form-item popup__form-item_type_image-link\",name:\"link\",value:validation.values.link,onChange:validation.handleChange,placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",id:\"link\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error link-error \\n                       popup__input-error_active\",children:validation.errors.link})]})});}export default AddPlacePopup;","map":{"version":3,"sources":["C:/Users/stanv/dev/react-mesto-api-full/frontend/src/components/AddPlacePopup.js"],"names":["PopupWithForm","useForm","useEffect","useMemo","AddPlacePopup","onLoading","isOpen","onAddPlace","onClose","initialValues","name","link","validation","handleSubmit","e","preventDefault","values","handleEscClose","key","document","addEventListener","removeEventListener","resetForm","isValid","handleChange","errors"],"mappings":"AAAA,MAAOA,CAAAA,aAAP,KAA0B,oBAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,OAASC,SAAT,CAAoBC,OAApB,KAAkC,OAAlC,C,wFAEA,QAASC,CAAAA,aAAT,MAAiE,IAAzCC,CAAAA,SAAyC,MAAzCA,SAAyC,CAA9BC,MAA8B,MAA9BA,MAA8B,CAAtBC,UAAsB,MAAtBA,UAAsB,CAAVC,OAAU,MAAVA,OAAU,CAC/D,GAAMC,CAAAA,aAAa,CAAGN,OAAO,CAAC,UAAM,CAClC,MAAO,CAACO,IAAI,CAAE,EAAP,CAAWC,IAAI,CAAE,EAAjB,CAAP,CACD,CAF4B,CAE1B,EAF0B,CAA7B,CAGA,GAAMC,CAAAA,UAAU,CAAGX,OAAO,CAACQ,aAAD,CAA1B,CAEA,QAASI,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACvBA,CAAC,CAACC,cAAF,GACAR,UAAU,CAACK,UAAU,CAACI,MAAX,CAAkBN,IAAnB,CAAyBE,UAAU,CAACI,MAAX,CAAkBL,IAA3C,CAAV,CACD,CAEDT,SAAS,CAAC,UAAI,CACZ,GAAI,CAACI,MAAL,CAAa,OACb,QAASW,CAAAA,cAAT,CAAwBH,CAAxB,CAA2B,CACvB,GAAIA,CAAC,CAACI,GAAF,GAAU,QAAd,CAAwB,CACtBV,OAAO,GACR,CACJ,CACDW,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,CAAqCH,cAArC,EACA,MAAO,WAAI,CACTE,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,CAAwCJ,cAAxC,EACD,CAFD,CAGD,CAXQ,CAWN,CAACX,MAAD,CAASE,OAAT,CAXM,CAAT,CAaAN,SAAS,CAAC,UAAM,CACd,CAACI,MAAD,EAAWM,UAAU,CAACU,SAAX,EAAX,CACD,CAFQ,CAEN,CAAChB,MAAD,CAFM,CAAT,CAKA,mBAAQ,KAAC,aAAD,EAAe,IAAI,CAAE,eAArB,CACe,KAAK,CAAE,aADtB,CAEe,MAAM,CAAEA,MAFvB,CAGe,OAAO,CAAEE,OAHxB,CAIe,QAAQ,CAAEK,YAJzB,CAKe,OAAO,CAAED,UAAU,CAACW,OALnC,CAMe,SAAS,CAAElB,SAN1B,CAOe,YAAY,CAAE,SAP7B,CAQe,YAAY,CAAE,eAR7B,uBASJ,aAAK,SAAS,CAAE,sBAAhB,wBACE,cAAO,IAAI,CAAC,MAAZ,CACO,SAAS,CAAC,yDADjB,CAEO,IAAI,CAAC,MAFZ,CAGO,KAAK,CAAEO,UAAU,CAACI,MAAX,CAAkBN,IAHhC,CAIO,QAAQ,CAAEE,UAAU,CAACY,YAJ5B,CAKO,WAAW,CAAC,kDALnB,CAMO,EAAE,CAAC,MANV,CAOO,SAAS,CAAC,GAPjB,CAQO,SAAS,CAAC,IARjB,CASO,QAAQ,KATf,EADF,cAWE,aAAM,SAAS,mEAAf,UAC6BZ,UAAU,CAACa,MAAX,CAAkBf,IAD/C,EAXF,cAaE,cAAO,IAAI,CAAC,KAAZ,CACO,SAAS,CAAC,mDADjB,CAEO,IAAI,CAAC,MAFZ,CAGO,KAAK,CAAEE,UAAU,CAACI,MAAX,CAAkBL,IAHhC,CAIO,QAAQ,CAAEC,UAAU,CAACY,YAJ5B,CAKO,WAAW,CAAC,oGALnB,CAMO,EAAE,CAAC,MANV,CAOO,QAAQ,KAPf,EAbF,cAqBE,aAAM,SAAS,mFAAf,UAC4CZ,UAAU,CAACa,MAAX,CAAkBd,IAD9D,EArBF,GATI,EAAR,CAkCD,CAED,cAAeP,CAAAA,aAAf","sourcesContent":["import PopupWithForm from './PopupWithForm.js';\nimport useForm from '../utils/useForm';\nimport { useEffect, useMemo} from 'react';\n\nfunction AddPlacePopup({onLoading, isOpen, onAddPlace, onClose}) {\n  const initialValues = useMemo(() => {\n    return {name: '', link: ''}\n  }, [])\n  const validation = useForm(initialValues);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddPlace(validation.values.name, validation.values.link);\n  }\n\n  useEffect(()=>{\n    if (!isOpen) return;\n    function handleEscClose(e) {\n        if (e.key === 'Escape') {\n          onClose();\n        }\n    }\n    document.addEventListener('keydown', handleEscClose);\n    return ()=>{\n      document.removeEventListener('keydown', handleEscClose);\n    }\n  }, [isOpen, onClose])\n\n  useEffect(() => {\n    !isOpen && validation.resetForm();\n  }, [isOpen])\n\n\n  return (<PopupWithForm name={'add-card-form'}\n                         title={'Новое место'}\n                         isOpen={isOpen}\n                         onClose={onClose}\n                         onSubmit={handleSubmit}\n                         isValid={validation.isValid}\n                         isLoading={onLoading}\n                         defaultTitle={'Создать'}\n                         loadingTitle={'Сохранение...'}>\n      <div className={'popup__form-fieldset'}>\n        <input type=\"text\"\n               className=\"popup__form-item popup__form-item_type_card-description\"\n               name=\"name\"\n               value={validation.values.name}\n               onChange={validation.handleChange}\n               placeholder=\"Название\"\n               id=\"card\"\n               minLength=\"2\"\n               maxLength=\"20\"\n               required/>\n        <span className={`popup__input-error card-error\n        popup__input-error_active`}>{validation.errors.name}</span>\n        <input type=\"url\"\n               className=\"popup__form-item popup__form-item_type_image-link\"\n               name=\"link\"\n               value={validation.values.link}\n               onChange={validation.handleChange}\n               placeholder=\"Ссылка на картинку\"\n               id=\"link\"\n               required/>\n        <span className={`popup__input-error link-error \n                       popup__input-error_active`}>{validation.errors.link}</span>\n      </div>\n    </PopupWithForm>)\n}\n\nexport default AddPlacePopup"]},"metadata":{},"sourceType":"module"}