{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Leonid\\\\dev\\\\react-mesto-auth\\\\src\\\\components\\\\EditProfilePopup.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\nimport useInput from '../utils/formValidator';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditProfilePopup(_ref) {\n  _s();\n\n  let {\n    onLoading,\n    onClose,\n    onUpdateUser,\n    isOpen\n  } = _ref;\n  const currentUser = useContext(CurrentUserContext);\n  const initialValues = useMemo(() => ({\n    name: '',\n    about: ''\n  }), []);\n  const validation = useInput(initialValues);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser(validation.values.name, validation.values.about);\n  }\n\n  useEffect(() => {\n    if (isOpen) {\n      validation.setValues(prev => ({ ...prev,\n        name: currentUser.name,\n        about: currentUser.about\n      }));\n    } else {\n      validation.resetForm();\n    }\n  }, [isOpen, currentUser]);\n  useEffect(() => {\n    if (!isOpen) return;\n\n    function handleEscClose(e) {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    }\n\n    document.addEventListener('keydown', handleEscClose);\n    return () => {\n      document.removeEventListener('keydown', handleEscClose);\n    };\n  }, [isOpen, onClose]);\n  return /*#__PURE__*/_jsxDEV(PopupWithForm, {\n    name: 'profile',\n    title: 'Редактировать профиль',\n    isOpen: isOpen,\n    onClose: onClose,\n    onSubmit: handleSubmit,\n    isLoading: onLoading,\n    isValid: validation.isValid,\n    buttonText: 'Сохранить',\n    loadingText: 'Сохранение...',\n    classConditions: `popup__save-button ${showDisabledSubmitButton && 'popup__save-button_disabled'}`,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"popup__input popup__input_type_name\",\n      name: \"name\",\n      placeholder: \"\\u0418\\u043C\\u044F\",\n      value: name.value,\n      onChange: name.handleChange,\n      id: \"nameInput\",\n      minLength: \"2\",\n      maxLength: \"40\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `popup__input-error name-input-error ${showNameError && 'popup__input-error_active'}`,\n      children: name.error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      className: \"popup__input popup__input_type_job\",\n      name: \"description\",\n      value: description.value,\n      onChange: description.handleChange,\n      placeholder: \"\\u041E \\u0441\\u0435\\u0431\\u0435\",\n      id: \"description-input\",\n      minLength: \"2\",\n      maxLength: \"200\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `popup__input-error description-input-error ${showDescriptionError && 'popup__input-error_active'}`,\n      children: description.error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditProfilePopup, \"2Nhq6sFQleAgl6JmROTBTWfR2No=\", false, function () {\n  return [useInput];\n});\n\n_c = EditProfilePopup;\nexport default EditProfilePopup;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProfilePopup\");","map":{"version":3,"sources":["C:/Users/Leonid/dev/react-mesto-auth/src/components/EditProfilePopup.js"],"names":["useContext","useEffect","CurrentUserContext","PopupWithForm","useInput","EditProfilePopup","onLoading","onClose","onUpdateUser","isOpen","currentUser","initialValues","useMemo","name","about","validation","handleSubmit","e","preventDefault","values","setValues","prev","resetForm","handleEscClose","key","document","addEventListener","removeEventListener","isValid","showDisabledSubmitButton","value","handleChange","showNameError","error","description","showDescriptionError"],"mappings":"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","sourcesContent":["import { useContext, useEffect } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport useInput from '../utils/formValidator'\r\n\r\nfunction EditProfilePopup({onLoading, onClose, onUpdateUser, isOpen}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const initialValues = useMemo(() => ({name: '', about: ''}), [])\r\n  const validation = useInput(initialValues);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser(validation.values.name, validation.values.about)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      validation.setValues((prev) => ({\r\n        ...prev,\r\n        name: currentUser.name,\r\n        about: currentUser.about\r\n      }));\r\n    } else {\r\n      validation.resetForm()\r\n    }\r\n  }, [isOpen, currentUser])\r\n\r\n  useEffect(()=>{\r\n    if (!isOpen) return;\r\n    function handleEscClose(e) {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    }\r\n    document.addEventListener('keydown', handleEscClose);\r\n    return ()=>{\r\n      document.removeEventListener('keydown', handleEscClose);\r\n    }\r\n  }, [isOpen, onClose])\r\n\r\n  return (\r\n    <PopupWithForm name={'profile'} title={'Редактировать профиль'} isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}\r\n    isLoading={onLoading} isValid={validation.isValid} buttonText={'Сохранить'} loadingText={'Сохранение...'}\r\n      classConditions={`popup__save-button ${(showDisabledSubmitButton) && 'popup__save-button_disabled'}`}>\r\n      <input type=\"text\" className=\"popup__input popup__input_type_name\" name=\"name\" placeholder=\"Имя\" value={name.value} onChange={name.handleChange}\r\n        id=\"nameInput\" minLength=\"2\" maxLength=\"40\" required\r\n      />\r\n      <span className={`popup__input-error name-input-error ${showNameError && 'popup__input-error_active'}`}>\r\n        {name.error}\r\n      </span>\r\n      <input type=\"text\" className=\"popup__input popup__input_type_job\" name=\"description\" value={description.value} onChange={description.handleChange}\r\n        placeholder=\"О себе\" id=\"description-input\" minLength=\"2\" maxLength=\"200\" required\r\n      />\r\n      <span className={`popup__input-error description-input-error ${showDescriptionError && 'popup__input-error_active'}`}>\r\n        {description.error}\r\n      </span>\r\n\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;"]},"metadata":{},"sourceType":"module"}