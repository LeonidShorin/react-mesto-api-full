{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\stanv\\\\dev\\\\react-mesto-api-full\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import PopupWithForm from'./PopupWithForm';import{useContext,useEffect,useMemo}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';import useForm from'../utils/useForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var onLoading=_ref.onLoading,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser,isOpen=_ref.isOpen;var currentUser=useContext(CurrentUserContext);var initialValues=useMemo(function(){return{name:'',about:''};},[]);var validation=useForm(initialValues);function handleSubmit(e){e.preventDefault();onUpdateUser(validation.values.name,validation.values.about);}useEffect(function(){if(isOpen){validation.setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{name:currentUser.name,about:currentUser.about});});}else{validation.resetForm();}},[isOpen,currentUser]);useEffect(function(){if(!isOpen)return;function handleEscClose(e){if(e.key==='Escape'){onClose();}}document.addEventListener('keydown',handleEscClose);return function(){document.removeEventListener('keydown',handleEscClose);};},[isOpen,onClose]);return/*#__PURE__*/_jsx(PopupWithForm,{name:'edit-profile-form',title:'Редактировать профиль',isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,isLoading:onLoading,isValid:validation.isValid,defaultTitle:'Сохранить',loadingTitle:'Сохранение...',children:/*#__PURE__*/_jsxs(\"div\",{className:'popup__form-fieldset',children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__form-item popup__form-item_type_profile-name\",name:\"name\",value:validation.values.name,onChange:validation.handleChange,placeholder:\"\\u0418\\u043C\\u044F\",id:\"nameInput\",minLength:\"2\",maxLength:\"40\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error name-input-error \\n        popup__input-error_active\",children:validation.errors.name}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__form-item popup__form-item_type_profile-description\",name:\"about\",value:validation.values.about,onChange:validation.handleChange,placeholder:\"\\u0420\\u043E\\u0434 \\u0437\\u0430\\u043D\\u044F\\u0442\\u0438\\u0439\",id:\"about-input\",minLength:\"2\",maxLength:\"200\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error description-input-error\\n       popup__input-error_active\",children:validation.errors.about})]})});}export default EditProfilePopup;","map":{"version":3,"sources":["C:/Users/stanv/dev/react-mesto-api-full/frontend/src/components/EditProfilePopup.js"],"names":["PopupWithForm","useContext","useEffect","useMemo","CurrentUserContext","useForm","EditProfilePopup","onLoading","onClose","onUpdateUser","isOpen","currentUser","initialValues","name","about","validation","handleSubmit","e","preventDefault","values","setValues","prev","resetForm","handleEscClose","key","document","addEventListener","removeEventListener","isValid","handleChange","errors"],"mappings":"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","sourcesContent":["import PopupWithForm from './PopupWithForm';\nimport {useContext, useEffect, useMemo} from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport useForm from '../utils/useForm';\n\nfunction EditProfilePopup({onLoading, onClose, onUpdateUser, isOpen}) {\n  const currentUser = useContext(CurrentUserContext);\n  const initialValues = useMemo(() => ({name: '', about: ''}), [])\n  const validation = useForm(initialValues);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser(validation.values.name, validation.values.about)\n  }\n\n  useEffect(() => {\n    if (isOpen) {\n      validation.setValues((prev) => ({\n        ...prev,\n        name: currentUser.name,\n        about: currentUser.about\n      }));\n    } else {\n      validation.resetForm()\n    }\n  }, [isOpen, currentUser])\n\n  useEffect(()=>{\n    if (!isOpen) return;\n    function handleEscClose(e) {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    }\n    document.addEventListener('keydown', handleEscClose);\n    return ()=>{\n      document.removeEventListener('keydown', handleEscClose);\n    }\n  }, [isOpen, onClose])\n\n  return (<PopupWithForm name={'edit-profile-form'}\n                         title={'Редактировать профиль'}\n                         isOpen={isOpen}\n                         onClose={onClose}\n                         onSubmit={handleSubmit}\n                         isLoading={onLoading}\n                         isValid={validation.isValid}\n                         defaultTitle={'Сохранить'}\n                         loadingTitle={'Сохранение...'}>\n      <div className={'popup__form-fieldset'}>\n        <input type=\"text\"\n               className=\"popup__form-item popup__form-item_type_profile-name\"\n               name=\"name\"\n               value={validation.values.name}\n               onChange={validation.handleChange}\n               placeholder=\"Имя\"\n               id=\"nameInput\"\n               minLength=\"2\"\n               maxLength=\"40\"\n               required/>\n        <span className={`popup__input-error name-input-error \n        popup__input-error_active`}>{validation.errors.name}</span>\n        <input type=\"text\"\n               className=\"popup__form-item popup__form-item_type_profile-description\"\n               name=\"about\"\n               value={validation.values.about}\n               onChange={validation.handleChange}\n               placeholder=\"Род занятий\"\n               id=\"about-input\"\n               minLength=\"2\"\n               maxLength=\"200\"\n               required/>\n        <span className={`popup__input-error description-input-error\n       popup__input-error_active`}>{validation.errors.about}</span>\n      </div>\n    </PopupWithForm>)\n}\n\nexport default EditProfilePopup"]},"metadata":{},"sourceType":"module"}