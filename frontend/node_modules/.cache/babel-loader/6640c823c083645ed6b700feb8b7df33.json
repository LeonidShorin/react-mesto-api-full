{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Leonid\\\\dev\\\\mesto-react\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _slicedToArray from\"C:\\\\Users\\\\Leonid\\\\dev\\\\mesto-react\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useEffect,useState}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext.js';import{api}from'../utils/api.js';import Header from'./Header.js';import Main from'./Main.js';import Footer from'./Footer.js';import ImagePopup from'./ImagePopup.js';import EditProfilePopup from'./EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup.js';import AddPlacePopup from'./AddPlacePopup.js';import ConfirmPopup from'./ConfirmPopup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setEditProfilePopupState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setAddPlacePopupState=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setEditAvatarPopupState=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isConfirmPopupOpen=_useState8[0],setConfirmPopupState=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selectedCard=_useState10[0],setSelectedCard=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cards=_useState12[0],setCards=_useState12[1];var _useState13=useState({name:'',about:'',link:''}),_useState14=_slicedToArray(_useState13,2),currentUser=_useState14[0],setCurrentUser=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isEditAvatarLoading=_useState16[0],setEditAvatarLoading=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isEditProfileLoading=_useState18[0],setEditProfileLoading=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isAddPlaceLoading=_useState20[0],setAddPlaceLoading=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isConfirmDeleteLoading=_useState22[0],setConfirmDeleteLoading=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),deletedCard=_useState24[0],setDeletedCard=_useState24[1];function handleEditAvatarClick(){setEditAvatarPopupState(true);}function handleEditProfileClick(){setEditProfilePopupState(true);}function handleAddPlaceClick(){setAddPlacePopupState(true);}function closeAllPopups(){setAddPlacePopupState(false);setEditProfilePopupState(false);setEditAvatarPopupState(false);setConfirmPopupState(false);setSelectedCard(null);setDeletedCard(null);}function handleCardClick(card){setSelectedCard(card);}function handleUpdateUser(name,description){setEditProfileLoading(true);api.editProfile({name:name,description:description}).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){console.log(err);}).finally(function(){setEditProfileLoading(false);});}function handleUpdateAvatar(avatar){setEditAvatarLoading(true);api.updateUserAvatar(avatar).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){console.log(err);}).finally(function(){setEditAvatarLoading(false);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});if(!isLiked){api.addLike(card._id).then(function(newCard){setCards(function(cards){return cards.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(err);});}else{api.removeLike(card._id).then(function(newCard){setCards(function(cards){return cards.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(err);});}}function handleCardDeleteSubmit(card){setConfirmDeleteLoading(true);api.deleteCard(card._id).then(function(){setCards(function(cards){return cards.filter(function(c){return c._id!==card._id;});});closeAllPopups();}).catch(function(err){console.log(err);}).finally(function(){setConfirmDeleteLoading(false);});}useEffect(function(){api.getUserInfo().then(function(data){setCurrentUser(data);}).catch(function(err){console.log(err);});},[]);useEffect(function(){api.getInitialCards().then(function(data){setCards(data);}).catch(function(err){console.log(err);});},[]);function handleAddPlaceSubmit(name,link){setAddPlaceLoading(true);api.addCard({name:name,link:link}).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){console.log(err);}).finally(function(){setAddPlaceLoading(false);});}function handleConfirmCardDelete(card){setConfirmPopupState(true);setDeletedCard(card);}return/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,cards:cards,onCardLike:handleCardLike,onCardDelete:handleConfirmCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser,onLoading:isEditProfileLoading}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar,onLoading:isEditAvatarLoading}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit,onLoading:isAddPlaceLoading}),/*#__PURE__*/_jsx(ConfirmPopup,{isOpen:isConfirmPopupOpen,onClose:closeAllPopups,onLoading:isConfirmDeleteLoading,card:deletedCard,onSubmit:handleCardDeleteSubmit}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"sources":["C:/Users/Leonid/dev/mesto-react/src/components/App.js"],"names":["useEffect","useState","CurrentUserContext","api","Header","Main","Footer","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPlacePopup","ConfirmPopup","App","isEditProfilePopupOpen","setEditProfilePopupState","isAddPlacePopupOpen","setAddPlacePopupState","isEditAvatarPopupOpen","setEditAvatarPopupState","isConfirmPopupOpen","setConfirmPopupState","selectedCard","setSelectedCard","cards","setCards","name","about","link","currentUser","setCurrentUser","isEditAvatarLoading","setEditAvatarLoading","isEditProfileLoading","setEditProfileLoading","isAddPlaceLoading","setAddPlaceLoading","isConfirmDeleteLoading","setConfirmDeleteLoading","deletedCard","setDeletedCard","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","handleCardClick","card","handleUpdateUser","description","editProfile","then","res","catch","err","console","log","finally","handleUpdateAvatar","avatar","updateUserAvatar","handleCardLike","isLiked","likes","some","i","_id","addLike","newCard","map","c","removeLike","handleCardDeleteSubmit","deleteCard","filter","getUserInfo","data","getInitialCards","handleAddPlaceSubmit","addCard","handleConfirmCardDelete"],"mappings":"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","sourcesContent":["import {useEffect, useState} from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\nimport {api} from '../utils/api.js';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport ImagePopup from './ImagePopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmPopup from './ConfirmPopup';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setEditProfilePopupState] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupState] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupState] = useState(false)\n  const [isConfirmPopupOpen, setConfirmPopupState] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [cards, setCards] = useState([]);\n  const [currentUser, setCurrentUser] = useState({\n    name: '',\n    about: '',\n    link: ''\n  });\n  const [isEditAvatarLoading, setEditAvatarLoading] = useState(false)\n  const [isEditProfileLoading, setEditProfileLoading] = useState(false);\n  const [isAddPlaceLoading, setAddPlaceLoading] = useState(false);\n  const [isConfirmDeleteLoading, setConfirmDeleteLoading] = useState(false);\n  const [deletedCard, setDeletedCard] = useState(null);\n\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupState(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupState(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupState(true);\n  }\n\n  function closeAllPopups() {\n    setAddPlacePopupState(false);\n    setEditProfilePopupState(false);\n    setEditAvatarPopupState(false);\n    setConfirmPopupState(false);\n    setSelectedCard(null);\n    setDeletedCard(null);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function handleUpdateUser(name, description) {\n    setEditProfileLoading(true)\n    api.editProfile({name, description})\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setEditProfileLoading(false);\n      })\n  }\n\n  function handleUpdateAvatar(avatar) {\n    setEditAvatarLoading(true);\n    api.updateUserAvatar(avatar)\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n      .finally(() => {\n        setEditAvatarLoading(false);\n      })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    if (!isLiked) {\n      api.addLike(card._id)\n        .then((newCard) => {\n          setCards((cards) => cards.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch(err => {\n          console.log(err)\n        });\n    } else {\n      api.removeLike(card._id)\n        .then((newCard) => {\n          setCards((cards) => cards.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch(err => {\n          console.log(err);\n        })\n    }\n  }\n\n  function handleCardDeleteSubmit(card) {\n    setConfirmDeleteLoading(true);\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards((cards) => {\n          return cards.filter(c => {\n            return c._id !== card._id\n          });\n        });\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n      .finally(() => {\n        setConfirmDeleteLoading(false);\n      })\n  }\n\n  useEffect(() => {\n    api.getUserInfo()\n      .then(data => {\n        setCurrentUser(data)\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }, [])\n\n\n  useEffect(() => {\n    api.getInitialCards()\n      .then(data => {\n        setCards(data)\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }, []);\n\n  function handleAddPlaceSubmit(name, link) {\n    setAddPlaceLoading(true);\n    api.addCard({name, link})\n      .then(newCard => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n      .finally(() => {\n        setAddPlaceLoading(false);\n      })\n  }\n\n  function handleConfirmCardDelete(card) {\n    setConfirmPopupState(true);\n    setDeletedCard(card);\n  }\n\n  return (<div className=\"page\">\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header/>\n      <Main onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleConfirmCardDelete}/>\n      <Footer/>\n      <EditProfilePopup isOpen={isEditProfilePopupOpen}\n                        onClose={closeAllPopups}\n                        onUpdateUser={handleUpdateUser}\n                        onLoading={isEditProfileLoading}/>\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen}\n                       onClose={closeAllPopups}\n                       onUpdateAvatar={handleUpdateAvatar}\n                       onLoading={isEditAvatarLoading}/>\n      <AddPlacePopup isOpen={isAddPlacePopupOpen}\n                     onClose={closeAllPopups}\n                     onAddPlace={handleAddPlaceSubmit}\n                     onLoading={isAddPlaceLoading}/>\n      <ConfirmPopup isOpen={isConfirmPopupOpen}\n                          onClose={closeAllPopups}\n                          onLoading={isConfirmDeleteLoading}\n                          card={deletedCard}\n                          onSubmit={handleCardDeleteSubmit}/>\n      <ImagePopup card={selectedCard}\n                  onClose={closeAllPopups}/>\n    </CurrentUserContext.Provider>\n  </div>)\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}