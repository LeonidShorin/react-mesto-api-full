{"ast":null,"code":"import PopupWithForm from'./PopupWithForm.js';import useInput from'../utils/formValidator.js';import{useEffect,useMemo}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddPlacePopup(_ref){var onLoading=_ref.onLoading,isOpen=_ref.isOpen,onAddPlace=_ref.onAddPlace,onClose=_ref.onClose;var initialValues=useMemo(function(){return{name:'',link:''};},[]);var validation=useInput(initialValues);function handleSubmit(e){e.preventDefault();onAddPlace(validation.values.name,validation.values.link);}useEffect(function(){if(!isOpen)return;function handleEscClose(e){if(e.key==='Escape'){onClose();}}document.addEventListener('keydown',handleEscClose);return function(){document.removeEventListener('keydown',handleEscClose);};},[isOpen,onClose]);useEffect(function(){!isOpen&&validation.resetForm();},[isOpen]);return/*#__PURE__*/_jsx(PopupWithForm,{name:'card',title:'Новое место',isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,isValid:validation.isValid,isLoading:onLoading,buttonText:'Создать',loadingText:'Сохранение...',children:/*#__PURE__*/_jsxs(\"fieldset\",{className:'popup__fieldset',children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__input popup__input_type_card\",name:\"name\",value:validation.values.name,onChange:validation.handleChange,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",id:\"card\",minLength:\"2\",maxLength:\"20\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error card-error popup__input-error_active\",children:validation.errors.name}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"popup__input popup__input_type_link\",name:\"link\",value:validation.values.link,onChange:validation.handleChange,placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",id:\"link\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error link-error popup__input-error_active\",children:validation.errors.link})]})});}export default AddPlacePopup;","map":{"version":3,"sources":["C:/Users/stanv/dev/react-mesto-api-full/frontend/src/components/AddPlacePopup.js"],"names":["PopupWithForm","useInput","useEffect","useMemo","AddPlacePopup","onLoading","isOpen","onAddPlace","onClose","initialValues","name","link","validation","handleSubmit","e","preventDefault","values","handleEscClose","key","document","addEventListener","removeEventListener","resetForm","isValid","handleChange","errors"],"mappings":"AAAA,MAAOA,CAAAA,aAAP,KAA0B,oBAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,OAASC,SAAT,CAAoBC,OAApB,KAAmC,OAAnC,C,wFAEA,QAASC,CAAAA,aAAT,MAAmE,IAA1CC,CAAAA,SAA0C,MAA1CA,SAA0C,CAA/BC,MAA+B,MAA/BA,MAA+B,CAAvBC,UAAuB,MAAvBA,UAAuB,CAAXC,OAAW,MAAXA,OAAW,CACjE,GAAMC,CAAAA,aAAa,CAAGN,OAAO,CAAC,UAAM,CAClC,MAAO,CAAEO,IAAI,CAAE,EAAR,CAAYC,IAAI,CAAE,EAAlB,CAAP,CACD,CAF4B,CAE1B,EAF0B,CAA7B,CAGA,GAAMC,CAAAA,UAAU,CAAGX,QAAQ,CAACQ,aAAD,CAA3B,CAEA,QAASI,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACvBA,CAAC,CAACC,cAAF,GACAR,UAAU,CAACK,UAAU,CAACI,MAAX,CAAkBN,IAAnB,CAAyBE,UAAU,CAACI,MAAX,CAAkBL,IAA3C,CAAV,CACD,CAEDT,SAAS,CAAC,UAAM,CACd,GAAI,CAACI,MAAL,CAAa,OACb,QAASW,CAAAA,cAAT,CAAwBH,CAAxB,CAA2B,CACzB,GAAIA,CAAC,CAACI,GAAF,GAAU,QAAd,CAAwB,CACtBV,OAAO,GACR,CACF,CACDW,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,CAAqCH,cAArC,EACA,MAAO,WAAM,CACXE,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,CAAwCJ,cAAxC,EACD,CAFD,CAGD,CAXQ,CAWN,CAACX,MAAD,CAASE,OAAT,CAXM,CAAT,CAaAN,SAAS,CAAC,UAAM,CACd,CAACI,MAAD,EAAWM,UAAU,CAACU,SAAX,EAAX,CACD,CAFQ,CAEN,CAAChB,MAAD,CAFM,CAAT,CAIA,mBACE,KAAC,aAAD,EAAe,IAAI,CAAE,MAArB,CAA6B,KAAK,CAAE,aAApC,CAAmD,MAAM,CAAEA,MAA3D,CACE,OAAO,CAAEE,OADX,CACoB,QAAQ,CAAEK,YAD9B,CAC4C,OAAO,CAAED,UAAU,CAACW,OADhE,CACyE,SAAS,CAAElB,SADpF,CAC+F,UAAU,CAAE,SAD3G,CACsH,WAAW,CAAE,eADnI,uBAGE,kBAAU,SAAS,CAAE,iBAArB,wBACE,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,qCAA7B,CAAmE,IAAI,CAAC,MAAxE,CAA+E,KAAK,CAAEO,UAAU,CAACI,MAAX,CAAkBN,IAAxG,CACE,QAAQ,CAAEE,UAAU,CAACY,YADvB,CACqC,WAAW,CAAC,kDADjD,CAC4D,EAAE,CAAC,MAD/D,CACsE,SAAS,CAAC,GADhF,CACoF,SAAS,CAAC,IAD9F,CACmG,QAAQ,KAD3G,EADF,cAIE,aAAM,SAAS,0DAAf,UACGZ,UAAU,CAACa,MAAX,CAAkBf,IADrB,EAJF,cAOE,cAAO,IAAI,CAAC,KAAZ,CAAkB,SAAS,CAAC,qCAA5B,CAAkE,IAAI,CAAC,MAAvE,CAA8E,KAAK,CAAEE,UAAU,CAACI,MAAX,CAAkBL,IAAvG,CAA6G,QAAQ,CAAEC,UAAU,CAACY,YAAlI,CACE,WAAW,CAAC,oGADd,CACmC,EAAE,CAAC,MADtC,CAC6C,QAAQ,KADrD,EAPF,cAUE,aAAM,SAAS,0DAAf,UACGZ,UAAU,CAACa,MAAX,CAAkBd,IADrB,EAVF,GAHF,EADF,CAoBD,CAED,cAAeP,CAAAA,aAAf","sourcesContent":["import PopupWithForm from './PopupWithForm.js';\r\nimport useInput from '../utils/formValidator.js';\r\nimport { useEffect, useMemo } from 'react';\r\n\r\nfunction AddPlacePopup({ onLoading, isOpen, onAddPlace, onClose }) {\r\n  const initialValues = useMemo(() => {\r\n    return { name: '', link: '' }\r\n  }, [])\r\n  const validation = useInput(initialValues);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace(validation.values.name, validation.values.link);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    function handleEscClose(e) {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    }\r\n    document.addEventListener('keydown', handleEscClose);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscClose);\r\n    }\r\n  }, [isOpen, onClose])\r\n\r\n  useEffect(() => {\r\n    !isOpen && validation.resetForm();\r\n  }, [isOpen])\r\n\r\n  return (\r\n    <PopupWithForm name={'card'} title={'Новое место'} isOpen={isOpen}\r\n      onClose={onClose} onSubmit={handleSubmit} isValid={validation.isValid} isLoading={onLoading} buttonText={'Создать'} loadingText={'Сохранение...'}\r\n    >\r\n      <fieldset className={'popup__fieldset'}>\r\n        <input type=\"text\" className=\"popup__input popup__input_type_card\" name=\"name\" value={validation.values.name}\r\n          onChange={validation.handleChange} placeholder=\"Название\" id=\"card\" minLength=\"2\" maxLength=\"20\" required\r\n        />\r\n        <span className={`popup__input-error card-error popup__input-error_active`}>\r\n          {validation.errors.name}\r\n        </span>\r\n        <input type=\"url\" className=\"popup__input popup__input_type_link\" name=\"link\" value={validation.values.link} onChange={validation.handleChange}\r\n          placeholder=\"Ссылка на картинку\" id=\"link\" required\r\n        />\r\n        <span className={`popup__input-error link-error popup__input-error_active`}>\r\n          {validation.errors.link}\r\n        </span>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;"]},"metadata":{},"sourceType":"module"}