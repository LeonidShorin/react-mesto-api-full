{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Leonid\\\\dev\\\\mesto-react\\\\src\\\\components\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport { useEffect, useState } from 'react';\nimport ImagePopup from './ImagePopup.js';\nimport { api } from '../utils/api.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmPopup from './ConfirmPopup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nConfirmDeletePopup;\n\nfunction App() {\n  _s();\n\n  const [isEditProfilePopupOpen, setEditProfilePopupState] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupState] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupState] = useState(false);\n  const [isConfirmDeletePopupOpen, setConfirmDeletePopupState] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [cards, setCards] = useState([]);\n  const [currentUser, setCurrentUser] = useState({\n    name: '',\n    about: '',\n    link: ''\n  });\n  const [isEditAvatarLoading, setEditAvatarLoading] = useState(false);\n  const [isEditProfileLoading, setEditProfileLoading] = useState(false);\n  const [isAddPlaceLoading, setAddPlaceLoading] = useState(false);\n  const [isConfirmDeleteLoading, setConfirmDeleteLoading] = useState(false);\n  const [deletedCard, setDeletedCard] = useState(null);\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupState(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupState(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupState(true);\n  }\n\n  function closeAllPopups() {\n    setAddPlacePopupState(false);\n    setEditProfilePopupState(false);\n    setEditAvatarPopupState(false);\n    setConfirmDeletePopupState(false);\n    setSelectedCard(null);\n    setDeletedCard(null);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleUpdateUser(name, description) {\n    setEditProfileLoading(true);\n    api.editProfile({\n      name,\n      description\n    }).then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setEditProfileLoading(false);\n    });\n  }\n\n  function handleUpdateAvatar(avatar) {\n    setEditAvatarLoading(true);\n    api.updateUserAvatar(avatar).then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setEditAvatarLoading(false);\n    });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    if (!isLiked) {\n      api.likeCard(card._id).then(newCard => {\n        setCards(cards => cards.map(c => c._id === card._id ? newCard : c));\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      api.dislikeCard(card._id).then(newCard => {\n        setCards(cards => cards.map(c => c._id === card._id ? newCard : c));\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n\n  function handleCardDeleteSubmit(card) {\n    setConfirmDeleteLoading(true);\n    api.deleteCard(card._id).then(() => {\n      setCards(cards => {\n        return cards.filter(c => {\n          return c._id !== card._id;\n        });\n      });\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setConfirmDeleteLoading(false);\n    });\n  }\n\n  useEffect(() => {\n    api.getUserInfo().then(data => {\n      setCurrentUser(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  useEffect(() => {\n    api.getInitialCards().then(data => {\n      setCards(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  function handleAddPlaceSubmit(name, link) {\n    setAddPlaceLoading(true);\n    api.addNewCard({\n      name,\n      link\n    }).then(newCard => {\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n    }).catch(err => {\n      console.log(err);\n    }).finally(() => {\n      setAddPlaceLoading(false);\n    });\n  }\n\n  function handleConfirmCardDelete(card) {\n    setConfirmDeletePopupState(true);\n    setDeletedCard(card);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n      value: currentUser,\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        onEditProfile: handleEditProfileClick,\n        onAddPlace: handleAddPlaceClick,\n        onEditAvatar: handleEditAvatarClick,\n        onCardClick: handleCardClick,\n        cards: cards,\n        onCardLike: handleCardLike,\n        onCardDelete: handleConfirmCardDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n        isOpen: isEditProfilePopupOpen,\n        onClose: closeAllPopups,\n        onUpdateUser: handleUpdateUser,\n        onLoading: isEditProfileLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n        isOpen: isEditAvatarPopupOpen,\n        onClose: closeAllPopups,\n        onUpdateAvatar: handleUpdateAvatar,\n        onLoading: isEditAvatarLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n        isOpen: isAddPlacePopupOpen,\n        onClose: closeAllPopups,\n        onAddPlace: handleAddPlaceSubmit,\n        onLoading: isAddPlaceLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ConfirmPopup, {\n        isOpen: isConfirmPopupOpen,\n        onClose: closeAllPopups,\n        onLoading: isConfirmDeleteLoading,\n        card: deletedCard,\n        onSubmit: handleCardDeleteSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        card: selectedCard,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 169,\n    columnNumber: 11\n  }, this);\n}\n\n_s(App, \"iwY1cxEonktlvFKnwa+0ulq77hw=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Leonid/dev/mesto-react/src/components/App.js"],"names":["Header","Main","Footer","useEffect","useState","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","ConfirmPopup","ConfirmDeletePopup","App","isEditProfilePopupOpen","setEditProfilePopupState","isAddPlacePopupOpen","setAddPlacePopupState","isEditAvatarPopupOpen","setEditAvatarPopupState","isConfirmDeletePopupOpen","setConfirmDeletePopupState","selectedCard","setSelectedCard","cards","setCards","currentUser","setCurrentUser","name","about","link","isEditAvatarLoading","setEditAvatarLoading","isEditProfileLoading","setEditProfileLoading","isAddPlaceLoading","setAddPlaceLoading","isConfirmDeleteLoading","setConfirmDeleteLoading","deletedCard","setDeletedCard","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","handleCardClick","card","handleUpdateUser","description","editProfile","then","res","catch","err","console","log","finally","handleUpdateAvatar","avatar","updateUserAvatar","handleCardLike","isLiked","likes","some","i","_id","likeCard","newCard","map","c","dislikeCard","handleCardDeleteSubmit","deleteCard","filter","getUserInfo","data","getInitialCards","handleAddPlaceSubmit","addNewCard","handleConfirmCardDelete","isConfirmPopupOpen"],"mappings":"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","sourcesContent":["import Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport {useEffect, useState} from 'react';\nimport ImagePopup from './ImagePopup.js';\nimport {api} from '../utils/api.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmPopup from './ConfirmPopup'; ConfirmDeletePopup\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setEditProfilePopupState] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupState] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupState] = useState(false)\n  const [isConfirmDeletePopupOpen, setConfirmDeletePopupState] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [cards, setCards] = useState([]);\n  const [currentUser, setCurrentUser] = useState({\n    name: '',\n    about: '',\n    link: ''\n  });\n  const [isEditAvatarLoading, setEditAvatarLoading] = useState(false)\n  const [isEditProfileLoading, setEditProfileLoading] = useState(false);\n  const [isAddPlaceLoading, setAddPlaceLoading] = useState(false);\n  const [isConfirmDeleteLoading, setConfirmDeleteLoading] = useState(false);\n  const [deletedCard, setDeletedCard] = useState(null);\n\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupState(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupState(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupState(true);\n  }\n\n  function closeAllPopups() {\n    setAddPlacePopupState(false);\n    setEditProfilePopupState(false);\n    setEditAvatarPopupState(false);\n    setConfirmDeletePopupState(false);\n    setSelectedCard(null);\n    setDeletedCard(null);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function handleUpdateUser(name, description) {\n    setEditProfileLoading(true)\n    api.editProfile({name, description})\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err)\n      })\n      .finally(() => {\n        setEditProfileLoading(false);\n      })\n  }\n\n  function handleUpdateAvatar(avatar) {\n    setEditAvatarLoading(true);\n    api.updateUserAvatar(avatar)\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n      .finally(() => {\n        setEditAvatarLoading(false);\n      })\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    if (!isLiked) {\n      api.likeCard(card._id)\n        .then((newCard) => {\n          setCards((cards) => cards.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch(err => {\n          console.log(err)\n        });\n    } else {\n      api.dislikeCard(card._id)\n        .then((newCard) => {\n          setCards((cards) => cards.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch(err => {\n          console.log(err);\n        })\n    }\n  }\n\n  function handleCardDeleteSubmit(card) {\n    setConfirmDeleteLoading(true);\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards((cards) => {\n          return cards.filter(c => {\n            return c._id !== card._id\n          });\n        });\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n      .finally(() => {\n        setConfirmDeleteLoading(false);\n      })\n  }\n\n  useEffect(() => {\n    api.getUserInfo()\n      .then(data => {\n        setCurrentUser(data)\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }, [])\n\n\n  useEffect(() => {\n    api.getInitialCards()\n      .then(data => {\n        setCards(data)\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }, []);\n\n  function handleAddPlaceSubmit(name, link) {\n    setAddPlaceLoading(true);\n    api.addNewCard({name, link})\n      .then(newCard => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n      .finally(() => {\n        setAddPlaceLoading(false);\n      })\n  }\n\n  function handleConfirmCardDelete(card) {\n    setConfirmDeletePopupState(true);\n    setDeletedCard(card);\n  }\n\n  return (<div className=\"page\">\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header/>\n      <Main onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleConfirmCardDelete}/>\n      <Footer/>\n      <EditProfilePopup isOpen={isEditProfilePopupOpen}\n                        onClose={closeAllPopups}\n                        onUpdateUser={handleUpdateUser}\n                        onLoading={isEditProfileLoading}/>\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen}\n                       onClose={closeAllPopups}\n                       onUpdateAvatar={handleUpdateAvatar}\n                       onLoading={isEditAvatarLoading}/>\n      <AddPlacePopup isOpen={isAddPlacePopupOpen}\n                     onClose={closeAllPopups}\n                     onAddPlace={handleAddPlaceSubmit}\n                     onLoading={isAddPlaceLoading}/>\n      <ConfirmPopup isOpen={isConfirmPopupOpen}\n                          onClose={closeAllPopups}\n                          onLoading={isConfirmDeleteLoading}\n                          card={deletedCard}\n                          onSubmit={handleCardDeleteSubmit}/>\n      <ImagePopup card={selectedCard}\n                  onClose={closeAllPopups}/>\n    </CurrentUserContext.Provider>\n  </div>)\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}