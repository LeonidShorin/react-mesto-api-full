{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\stanv\\\\dev\\\\react-mesto-api-full\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\defineProperty.js\";import _objectSpread from\"C:\\\\Users\\\\stanv\\\\dev\\\\react-mesto-api-full\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\stanv\\\\dev\\\\react-mesto-api-full\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useCallback,useEffect,useState}from'react';function useForm(initialValues){var _useState=useState(initialValues),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var isDirtyInput=Object.values(initialValues).every(function(value){return value==='';});var _useState5=useState(isDirtyInput),_useState6=_slicedToArray(_useState5,2),isValid=_useState6[0],setIsValid=_useState6[1];function handleChange(e){var input=e.target;handleError(input);setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.name,e.target.value));});}function handleError(input){setErrors(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},input.name,input.validationMessage));});}var resetForm=useCallback(function(){setErrors(function(prev){return Object.fromEntries(Object.keys(prev).map(function(key){return[key,''];}));});setValues(initialValues);},[initialValues]);useEffect(function(){var areErrorsEmpty=Object.values(errors).every(function(error){return error==='';})||errors==={};var isAnyInputClear=Object.values(values).some(function(value){return value==='';})||values==={};if(areErrorsEmpty&&!isAnyInputClear){setIsValid(true);}else{setIsValid(false);}},[values,errors]);return{values:values,handleChange:handleChange,handleError:handleError,errors:errors,resetForm:resetForm,isValid:isValid,setValues:setValues,setErrors:setErrors};}export default useForm;","map":{"version":3,"sources":["C:/Users/stanv/dev/react-mesto-api-full/frontend/src/utils/useForm.js"],"names":["useCallback","useEffect","useState","useForm","initialValues","values","setValues","errors","setErrors","isDirtyInput","Object","every","value","isValid","setIsValid","handleChange","e","input","target","handleError","prev","name","validationMessage","resetForm","fromEntries","keys","map","key","areErrorsEmpty","error","isAnyInputClear","some"],"mappings":"obAAA,OAAQA,WAAR,CAAqBC,SAArB,CAAgCC,QAAhC,KAA+C,OAA/C,CAEA,QAASC,CAAAA,OAAT,CAAiBC,aAAjB,CAAgC,CAC9B,cAA4BF,QAAQ,CAACE,aAAD,CAApC,wCAAOC,MAAP,eAAeC,SAAf,eACA,eAA4BJ,QAAQ,CAAC,EAAD,CAApC,yCAAOK,MAAP,eAAeC,SAAf,eACA,GAAMC,CAAAA,YAAY,CAAGC,MAAM,CAACL,MAAP,CAAcD,aAAd,EAA6BO,KAA7B,CAAmC,SAAAC,KAAK,CAAG,CAAC,MAAOA,CAAAA,KAAK,GAAK,EAAjB,CAAoB,CAAhE,CAArB,CACA,eAA8BV,QAAQ,CAACO,YAAD,CAAtC,yCAAOI,OAAP,eAAgBC,UAAhB,eAEA,QAASC,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACvB,GAAMC,CAAAA,KAAK,CAAGD,CAAC,CAACE,MAAhB,CACCC,WAAW,CAACF,KAAD,CAAX,CACAX,SAAS,CAAC,SAACc,IAAD,wCAAaA,IAAb,wBAAoBJ,CAAC,CAACE,MAAF,CAASG,IAA7B,CAAoCL,CAAC,CAACE,MAAF,CAASN,KAA7C,IAAD,CAAT,CACF,CAGD,QAASO,CAAAA,WAAT,CAAqBF,KAArB,CAA4B,CAC1BT,SAAS,CAAC,SAACY,IAAD,wCAAaA,IAAb,wBAAoBH,KAAK,CAACI,IAA1B,CAAiCJ,KAAK,CAACK,iBAAvC,IAAD,CAAT,CACD,CAED,GAAMC,CAAAA,SAAS,CAAGvB,WAAW,CAAC,UAAM,CAClCQ,SAAS,CAAC,SAACY,IAAD,CAAQ,CAChB,MAAOV,CAAAA,MAAM,CAACc,WAAP,CAAmBd,MAAM,CAACe,IAAP,CAAYL,IAAZ,EAAkBM,GAAlB,CAAsB,SAACC,GAAD,CAAO,CACrD,MAAO,CAACA,GAAD,CAAM,EAAN,CAAP,CACD,CAFyB,CAAnB,CAAP,CAGD,CAJQ,CAAT,CAKArB,SAAS,CAACF,aAAD,CAAT,CACD,CAP4B,CAO3B,CAACA,aAAD,CAP2B,CAA7B,CASAH,SAAS,CAAC,UAAI,CACZ,GAAM2B,CAAAA,cAAc,CAAGlB,MAAM,CAACL,MAAP,CAAcE,MAAd,EAAsBI,KAAtB,CAA4B,SAAAkB,KAAK,CAAE,CACxD,MAAOA,CAAAA,KAAK,GAAK,EAAjB,CACD,CAFsB,GAEjBtB,MAAM,GAAK,EAFjB,CAGA,GAAMuB,CAAAA,eAAe,CAAGpB,MAAM,CAACL,MAAP,CAAcA,MAAd,EAAsB0B,IAAtB,CAA2B,SAAAnB,KAAK,CAAE,CACxD,MAAOA,CAAAA,KAAK,GAAK,EAAjB,CACD,CAFuB,GAElBP,MAAM,GAAK,EAFjB,CAGA,GAAIuB,cAAc,EAAI,CAACE,eAAvB,CAAwC,CACtChB,UAAU,CAAC,IAAD,CAAV,CACD,CAFD,IAEO,CACNA,UAAU,CAAC,KAAD,CAAV,CACA,CACF,CAZQ,CAYN,CAACT,MAAD,CAASE,MAAT,CAZM,CAAT,CAgBA,MAAO,CACLF,MAAM,CAANA,MADK,CAELU,YAAY,CAAZA,YAFK,CAGLI,WAAW,CAAXA,WAHK,CAILZ,MAAM,CAANA,MAJK,CAKLgB,SAAS,CAATA,SALK,CAMLV,OAAO,CAAPA,OANK,CAOLP,SAAS,CAATA,SAPK,CAQLE,SAAS,CAATA,SARK,CAAP,CAaD,CAED,cAAeL,CAAAA,OAAf","sourcesContent":["import {useCallback, useEffect, useState} from 'react';\n\nfunction useForm(initialValues) {\n  const [values, setValues] = useState(initialValues);\n  const [errors, setErrors] = useState({});\n  const isDirtyInput = Object.values(initialValues).every(value=> {return value === ''});\n  const [isValid, setIsValid] = useState(isDirtyInput);\n\n  function handleChange(e) {\n    const input = e.target;\n     handleError(input);\n     setValues((prev)=>({...prev, [e.target.name]: e.target.value}));\n  }\n\n\n  function handleError(input) {\n    setErrors((prev)=>({...prev, [input.name]: input.validationMessage}));\n  }\n\n  const resetForm = useCallback(() => {\n    setErrors((prev)=>{\n      return Object.fromEntries(Object.keys(prev).map((key)=>{\n        return [key, '']\n      }))\n    });\n    setValues(initialValues);\n  },[initialValues])\n\n  useEffect(()=>{\n    const areErrorsEmpty = Object.values(errors).every(error=>{\n      return error === ''\n    }) || errors === {};\n    const isAnyInputClear = Object.values(values).some(value=>{\n      return value === '';\n    }) || values === {};\n    if (areErrorsEmpty && !isAnyInputClear) {\n      setIsValid(true);\n    } else {\n     setIsValid(false)\n    }\n  }, [values, errors])\n\n\n\n  return {\n    values,\n    handleChange,\n    handleError,\n    errors,\n    resetForm,\n    isValid,\n    setValues,\n    setErrors\n  }\n\n\n\n}\n\nexport default useForm"]},"metadata":{},"sourceType":"module"}